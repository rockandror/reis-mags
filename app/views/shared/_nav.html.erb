<nav class="navbar navbar-inverse">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <%= link_to root_path, class: "navbar-brand" do %>
        <span>suspender</span>
      <% end %>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-left">
        <li>
          <a href="/components">Components</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <%= link_to "#", class: "dropdown-toggle", data: { toggle: "dropdown" } do %>
            <%= image_tag(flag(locale)) %>
            <span class="caret"></span>
          <% end %>
          <ul id="language_switcher" class="dropdown-menu">
            <% I18n.available_locales.each do |locale| %>
              <% if I18n.locale != locale %>
                <%= content_tag :li do %>
                  <% I18n.with_locale(locale) do %>
                    <% url_params = { locale: locale} %>
                    <%= link_to params.merge(url_params), data: { turbolinks: false }  do %>
                     <%= image_tag(flag(locale)) %>
                    <% end %>
                  <% end %>
                <% end %>
              <% end %>
            <% end %>
          </ul>
          <div class="line-separate hidden-xs"></div>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>
